<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yixuan Tang | NLP & Information Systems</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="index.css">

    <!-- MathJax -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <div class="container">
        <!-- Navigation -->
        <nav class="nav">
            <div class="nav-brand">
                <a href="#">Home</a>
            </div>
            <div class="nav-links">
                <a href="#about">About</a>
                <a href="#publications">Publications</a>
                <a href="#education">Education</a>
                <a href="#contact">Contact</a>
            </div>
        </nav>

        <!-- About / Profile Section -->
        <section id="about" class="header-section">
            <!-- Profile Sidebar (Right) -->
            <div class="profile-card">
                <img src="images/profile.png" alt="Yixuan Tang">
                <div class="contact-info">
                    <p>PhD Student</p>
                    <p>HKUST</p>
                    <div class="social-icons">
                        <a href="mailto:ytangch@connect.ust.hk" title="Email"><i class="fas fa-envelope"></i></a>
                        <a href="https://scholar.google.com/citations?hl=en&user=4Q9Gje0AAAAJ" target="_blank"><i class="fas fa-graduation-cap"></i></a>
                        <a href="https://github.com/yixuantt" target="_blank"><i class="fab fa-github"></i></a>
                        <a href="https://www.linkedin.com/in/yixuan-tang-2023yixuan/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>

            <!-- Bio Text (Left) -->
            <div class="bio-text">
                <h1>Yixuan Tang</h1>
                <p class="subtitle">PhD Student in NLP & Information Systems at HKUST</p>
                
                <p>I am a PhD student at <a href="https://hkust.edu.hk/" target="_blank">HKUST</a>, advised by <a href="https://yya518.github.io/index" target="_blank">Prof. Yi Yang</a>. My work lies at the intersection of <strong>NLP</strong> and <strong>Information Systems</strong>.</p>
                
                <p>My work spans:</p>
                <ul>
                    <li><strong>Financial Intelligence:</strong> Specialized LLMs and benchmarks for financial text analysis.</li>
                    <li><strong>LLM Alignment & Adaptation:</strong> Instruction tuning and alignment for robust, human-centric models.</li>
                    <li><strong>Representation Learning & Embeddings:</strong> Embedding models for complex scenarios.</li>
                </ul>
                
                <!-- News Section -->
                <div class="news-wrapper">
                    <h2>üì¢ News</h2>
                    <div id="news-table" class="news-table">
                        <div class="loading">Loading news...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured Research -->
        <section id="featured">
            <h2>üåü Featured Research</h2>
            <div id="featured-projects-container" class="publication-list">
                <div class="loading">Loading featured projects...</div>
            </div>
        </section>

        <!-- Business Publications (Separate Section as per original) -->
        <section id="business-publications">
            <h2>Business & IS Publications</h2>
            <div id="business-publication-list-container" class="publication-list">
                <div class="loading">Loading publications...</div>
            </div>
        </section>

        <!-- Publications -->
        <section id="publications">
            <h2>AI & NLP Publications</h2>
            
            <!-- Filters -->
            <div class="filter-controls">
                <div class="filter-group">
                    <select id="filter-year">
                        <option value="all">Year: All</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="filter-type">
                        <option value="all">Type: All</option>
                        <option value="Conference">Conference</option>
                        <option value="Journal">Journal</option>
                        <option value="Project">Project</option>
                        <option value="Preprint">Preprint</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="filter-topic">
                        <option value="all">Topic: All</option>
                    </select>
                </div>
            </div>

            <!-- List Container -->
            <div id="publication-list-container" class="publication-list">
                <div class="loading">Loading publications...</div>
            </div>

            <!-- Pagination -->
            <div id="pagination-controls" class="pagination"></div>
        </section>

        <!-- Education -->
        <section id="education" class="section">
            <h2>üéì Education</h2>
            <ul class="education-list">
                <li class="education-item">
                    <div class="edu-details">
                        <h4>MPhil in Information Systems</h4>
                        <p>The Hong Kong University of Science and Technology (HKUST)</p>
                    </div>
                    <div class="edu-year">2024 - Present</div>
                </li>
                <li class="education-item">
                    <div class="edu-details">
                        <h4>Master in Big Data Technology</h4>
                        <p>The Hong Kong University of Science and Technology (HKUST)</p>
                    </div>
                    <div class="edu-year">2021 - 2022</div>
                </li>
                <li class="education-item">
                    <div class="edu-details">
                        <h4>Bachelor in Computer Science</h4>
                        <p>Chongqing University</p>
                    </div>
                    <div class="edu-year">2017 - 2021</div>
                </li>
            </ul>
        </section>

        <!-- Contact Footer -->
        <section id="contact" class="section contact-footer">
            <p>Copyright &copy; 2025 Yixuan Tang.</p>
        </section>

    </div>

    <!-- Back to top -->
    <div id="back-to-top" class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Citation Modal -->
    <div id="cite-modal" class="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <h3>BibTeX Citation</h3>
                <button id="close-modal-btn" style="background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
            </div>
            <div class="code-block">
                <pre><code id="bibtex-content"></code></pre>
            </div>
            <div style="text-align: right; margin-top: 1rem;">
                <button id="copy-bibtex-btn" style="background: var(--text-color); color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">Copy</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Global variables
        let allPublications = [];
        let allNews = []; // Add news variable
        let filteredPublications = [];
        let currentPage = 1;
        const itemsPerPage = 10; // Increased for list view

        // DOM elements
        const newsContainer = document.getElementById('news-table'); // News container
        const featuredContainer = document.getElementById('featured-projects-container');
        const listContainer = document.getElementById('publication-list-container');
        const businessListContainer = document.getElementById('business-publication-list-container');
        const paginationControls = document.getElementById('pagination-controls');
        const yearFilter = document.getElementById('filter-year');
        const typeFilter = document.getElementById('filter-type');
        const topicFilter = document.getElementById('filter-topic');
        const citeModal = document.getElementById('cite-modal');
        const bibtexContent = document.getElementById('bibtex-content');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const copyBibtexBtn = document.getElementById('copy-bibtex-btn');

        // Helper: Get HTML for authors (bolding own name)
        function getAuthorsHTML(authors) {
            return authors.map(author => 
                author === 'Yixuan Tang' ? `<strong>${author}</strong>` : author
            ).join(', ');
        }

        // Helper: Get HTML for links
        function getLinksHTML(pub) {
            let html = '';
            if (pub.url) html += `<a href="${pub.url}" target="_blank" class="btn-link">üìÑ PDF</a>`;
            if (pub.code_url) html += `<a href="${pub.code_url}" target="_blank" class="btn-link">üíª Code</a>`;
            if (pub.project_url) html += `<a href="${pub.project_url}" target="_blank" class="btn-link">üîó Project</a>`;
            if (pub.bibtex) html += `<a href="#" onclick="showCiteModal('${encodeURIComponent(pub.bibtex)}'); return false;" class="btn-link">‚ùû BibTeX</a>`;
            return html;
        }

        // Helper: Get status badge HTML for business publications
        function getStatusBadgeHTML(status) {
            if (!status) return '';
            
            // Normalize status text for CSS class matching
            const statusLower = status.toLowerCase();
            let statusClass = 'status-default';
            
            if (statusLower.includes('published') || statusLower.includes('published')) {
                statusClass = 'status-published';
            } else if (statusLower.includes('accepted') || statusLower.includes('accept')) {
                statusClass = 'status-accepted';
            } else if (statusLower.includes('minor')) {
                statusClass = 'status-minor';
            } else if (statusLower.includes('major')) {
                statusClass = 'status-major';
            } else if (statusLower.includes('revision') || statusLower.includes('revise')) {
                statusClass = 'status-revision';
            } else if (statusLower.includes('under review') || statusLower.includes('review')) {
                statusClass = 'status-review';
            }
            
            return `<span class="status-badge ${statusClass}">${status}</span>`;
        }

        // Helper: Create publication item HTML
        function createPublicationItem(pub, showImage = false, showStatus = false) {
            const authorsHTML = getAuthorsHTML(pub.authors);
            const linksHTML = getLinksHTML(pub);
            const statusBadge = showStatus ? getStatusBadgeHTML(pub.status) : '';
            
            // Only show image for featured research
            if (showImage && pub.image_url) {
                return `
                    <div class="publication-item publication-item-with-image fade-in" data-title="${pub.title.replace(/"/g, '&quot;')}">
                        <div class="pub-media">
                            <img src="${pub.image_url}" alt="${pub.title}">
                        </div>
                        <div class="pub-content">
                            <div class="pub-header">
                                <a href="${pub.url || '#'}" class="pub-title" target="_blank">${pub.title}</a>
                                ${statusBadge}
                            </div>
                            <div class="pub-authors">${authorsHTML}</div>
                            <div class="pub-venue">${pub.venue} (${pub.year})</div>
                            <div class="pub-links">
                                ${linksHTML}
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // No image - simple list style
                return `
                    <div class="publication-item publication-item-no-image fade-in" data-title="${pub.title.replace(/"/g, '&quot;')}">
                        <div class="pub-content">
                            <div class="pub-header">
                                <a href="${pub.url || '#'}" class="pub-title" target="_blank">${pub.title}</a>
                                ${statusBadge}
                            </div>
                            <div class="pub-authors">${authorsHTML}</div>
                            <div class="pub-venue">${pub.venue} (${pub.year})</div>
                            <div class="pub-links">
                                ${linksHTML}
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Initialize
        async function initialize() {
            try {
                // Load Publications
                const pubResponse = await fetch('publications.json');
                if (!pubResponse.ok) throw new Error(`HTTP error! status: ${pubResponse.status}`);
                allPublications = await pubResponse.json();
                
                // Sort by year
                allPublications.sort((a, b) => {
                    const yearA = parseInt(a.year) || 9999;
                    const yearB = parseInt(b.year) || 9999;
                    return yearB - yearA;
                });

                renderFeaturedProjects();
                populateFilters();
                addEventListeners();
                applyFiltersAndRender();
                renderBusinessPublications();

                // Load News
                const newsResponse = await fetch('news.json');
                if (!newsResponse.ok) throw new Error(`HTTP error! status: ${newsResponse.status}`);
                allNews = await newsResponse.json();
                renderNews();

            } catch (error) {
                console.error("Could not load data:", error);
                if(featuredContainer) featuredContainer.innerHTML = `<div class="loading">Failed to load featured projects.</div>`;
                if(listContainer) listContainer.innerHTML = `<div class="loading">Failed to load publications.</div>`;
                if(newsContainer) newsContainer.innerHTML = `<div class="loading">Failed to load news.</div>`;
            }
        }

        function renderNews() {
            if (!newsContainer) return;
            if (allNews.length === 0) {
                newsContainer.innerHTML = '<p>No news yet.</p>';
                return;
            }
            
            // Take top 5 news or all
            const newsToShow = allNews.slice(0, 5);
            
            const tableHtml = `
                <table class="table">
                    <tbody>
                        ${newsToShow.map(item => `
                            <tr>
                                <td class="date-col">${item.date}</td>
                                <td>${item.content}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            newsContainer.innerHTML = tableHtml;
        }

        function renderFeaturedProjects() {
            if (!featuredContainer) return;
            const featured = allPublications.filter(p => p.featured);
            if (featured.length === 0) {
                featuredContainer.style.display = 'none'; // Hide section if none
                return;
            }
            featuredContainer.innerHTML = featured.map(pub => createPublicationItem(pub, true)).join('');
        }

        function renderBusinessPublications() {
            if (!businessListContainer) return;
            const businessPubs = allPublications.filter(p => p.category === 'business');
            if (businessPubs.length === 0) {
                 document.getElementById('business-publications').style.display = 'none';
                 return;
            }
            businessListContainer.innerHTML = businessPubs.map(pub => createPublicationItem(pub, false, true)).join('');
        }

        function populateFilters() {
            const years = [...new Set(allPublications.map(p => p.year))].sort((a,b) => b-a);
            const topics = [...new Set(allPublications.flatMap(p => p.tags))].sort();

            years.forEach(year => {
                if(!year || year==='-') return;
                const option = document.createElement('option');
                option.value = year;
                option.textContent = `Year: ${year}`;
                yearFilter.appendChild(option);
            });
            
            topics.forEach(topic => {
                const option = document.createElement('option');
                option.value = topic;
                option.textContent = `Topic: ${topic}`;
                topicFilter.appendChild(option);
            });
        }

        function applyFiltersAndRender() {
            const selectedYear = yearFilter.value;
            const selectedType = typeFilter.value;
            const selectedTopic = topicFilter.value;

            filteredPublications = allPublications.filter(pub => {
                const categoryMatch = (pub.category === 'cs' || !pub.category);
                const yearMatch = (selectedYear === 'all') || (pub.year == selectedYear);
                const typeMatch = (selectedType === 'all') || (pub.type === selectedType);
                const topicMatch = (selectedTopic === 'all') || pub.tags.includes(selectedTopic);
                return categoryMatch && yearMatch && typeMatch && topicMatch;
            });

            currentPage = 1;
            renderPage();
        }

        function renderPage() {
            if (!listContainer) return;
            listContainer.innerHTML = '';
            
            if (filteredPublications.length === 0) {
                listContainer.innerHTML = '<div class="loading">No publications match the current filter.</div>';
                renderPagination();
                return;
            }
            
            const paginatedItems = filteredPublications.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
            listContainer.innerHTML = paginatedItems.map(pub => createPublicationItem(pub, false)).join('');
            renderPagination();
        }

        function renderPagination() {
            if (!paginationControls) return;
            const totalItems = filteredPublications.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            paginationControls.innerHTML = '';
            if (totalPages <= 1) return;

            const createButton = (content, page, enabled = true) => {
                const button = document.createElement('button');
                button.innerHTML = content;
                button.className = page === currentPage ? 'active' : '';
                if (!enabled) button.disabled = true;
                else button.onclick = () => { 
                    currentPage = page; 
                    renderPage(); 
                    document.getElementById('publications').scrollIntoView({behavior: 'smooth'});
                };
                return button;
            };

            paginationControls.appendChild(createButton('‚Üê', currentPage - 1, currentPage > 1));
            for (let i = 1; i <= totalPages; i++) {
                paginationControls.appendChild(createButton(i, i));
            }
            paginationControls.appendChild(createButton('‚Üí', currentPage + 1, currentPage < totalPages));
        }

        // Citation Modal Logic
        window.showCiteModal = function(bibtex) {
            bibtexContent.textContent = decodeURIComponent(bibtex);
            citeModal.classList.add('show');
        }
        
        closeModalBtn.onclick = () => citeModal.classList.remove('show');
        
        copyBibtexBtn.onclick = () => {
            navigator.clipboard.writeText(bibtexContent.textContent);
            const originalText = copyBibtexBtn.textContent;
            copyBibtexBtn.textContent = 'Copied!';
            setTimeout(() => copyBibtexBtn.textContent = originalText, 2000);
        };
        
        window.onclick = (e) => {
            if (e.target == citeModal) citeModal.classList.remove('show');
        };

        // Back to Top
        const backToTopBtn = document.getElementById('back-to-top');
        window.onscroll = () => {
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        };
        backToTopBtn.onclick = () => {
            window.scrollTo({top: 0, behavior: 'smooth'});
        };

        function addEventListeners() {
            yearFilter.addEventListener('change', applyFiltersAndRender);
            typeFilter.addEventListener('change', applyFiltersAndRender);
            topicFilter.addEventListener('change', applyFiltersAndRender);
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>